<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home | June UTL</title>

    <link rel="stylesheet" href="style.css" />

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

    <style>
      body {
        background: rgb(79, 15, 137);
        background: linear-gradient(
          90deg,
          rgba(79, 15, 137, 1) 32%,
          rgba(99, 39, 147, 1) 83%
        );
        margin: 0;
      }

      #boxResult {
        height: 400px;
        overflow-y: auto;
      }

      @media (max-width: 992px) {
        #boxResult {
          height: auto;
        }
      }

      footer {
        background-color: black;
        color: white;
      }

      #sectionOne {
        height: 700px;

        }
      }

      #sectionTwo {
        width: 100%;
        height: auto; /* This ensures the image height adjusts proportionally */
      }
    </style>
  </head>
  <body>
    <header></header>
    <nav
      class="navbar navbar-expand-lg bg-dark border-bottom border-body"
      data-bs-theme="dark"
    >
      <div class="container-fluid">
        <a class="navbar-brand" href="#sectionOne"
          ><img src="noobutwiz.png" alt=""
        /></a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#sectionTwo"
                >Announcements</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                href="https://myhr.peoplestrong.com//altLogin.jsf"
                target="_blank"
                >MyHR</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#" target="_blank"
                >Salesforce</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" target="_blank">CX Charter Form</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" target="_blank">Medallia</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" target="_blank">Extraction Link</a>
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Other Tools
              </a>
              <ul class="dropdown-menu">
                <li>
                  <a class="dropdown-item" href="#" target="_blank"
                    >Clearview</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="#" target="_blank">Clarity</a>
                </li>
                <!-- <li><hr class="dropdown-divider" /></li> -->
                <li>
                  <a class="dropdown-item" href="#" target="_blank">FUSE</a>
                </li>
              </ul>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>

    <!-- Section One -->

    <section
      id="sectionOne"
      class="d-flex flex-column justify-content-center align-items-center"
    >
      <div class="col-lg-12 col-md-6 col-sm-3">
        <div id="sectionOne2" class="card p-3 border-0 m-3">
          <div class="card">
            <div class="card-body">
              <h5 id="searchEmployee" class="text-center">
                Search an Employee
              </h5>
              <div class="card p-3">
                <div class="row">
                  <div class="col-md-6">
                    <div class="input-group mb-3">
                      <span class="input-group-text" id="basic-addon1"
                        >Employee Name:</span
                      >
                      <input
                        id="nameInput"
                        type="text"
                        class="form-control"
                        placeholder="Enter the employee name"
                        aria-label="Employee Name"
                        aria-describedby="basic-addon1"
                      />
                    </div>
                    <div class="position-relative bottom-0 end-0 p-2">
                      <button
                        type="button"
                        class="btn btn-primary"
                        onclick="queryEmployee()"
                      >
                        Search
                      </button>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div id="boxResult" class="card p-3">
                      <div class="mt-3" id="wrapIDResult" style="display: none">
                        <div id="result"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="sectionTwo">
      <div id="carouselExample" class="carousel slide">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              src="https://static.wixstatic.com/media/d888e0_16fad7da4df74b739f30c43134eeb819~mv2.png/v1/fill/w_1892,h_806,al_c,q_90,enc_auto/d888e0_16fad7da4df74b739f30c43134eeb819~mv2.png"
              class="d-block w-100 img-fluid"
              alt="..."
            />
          </div>
          <div class="carousel-item">
            <img
              src="https://static.wixstatic.com/media/344d0c_25fbb760b38646c99c22e0400a0a8d82~mv2.jpg/v1/fill/w_1620,h_638,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/344d0c_25fbb760b38646c99c22e0400a0a8d82~mv2.jpg"
              class="d-block w-100 img-fluid"
              alt="..."
            />
          </div>
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#carouselExample"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </section>
    <footer class="card border-0 bg-dark vstack gap-1">
      <div
        class="card hstack gap-3 justify-content-center p-3 border-0 bg-dark"
      >
        <a href=""><i class="fa-brands fa-chrome fa-2xl text-white"></i></a>
        <a href=""><i class="fa-brands fa-battle-net fa-2xl text-white"></i></a>
        <a
          href="https://d7f000000zntyuaq.my.salesforce.com/console"
          target="_blank"
        >
          <i class="fa-brands fa-salesforce fa-2xl text-white"></i>
        </a>
      </div>
      <div class="card border-0 p-1 text-center text-white bg-dark">
        <p>All rights reserved ¬©Ô∏è</p>
        <p>Created by: <em>Me & I </em>üòÅ</p>
      </div>
    </footer>

    <script
      src="https://kit.fontawesome.com/94d1906724.js"
      crossorigin="anonymous"
    ></script>

    <!-- Your existing HTML content -->

    <script>
      var csvData; // Global variable to store CSV data

      // Function to load the CSV file automatically
      window.onload = function () {
        loadCSVFile();
      };

      function loadCSVFile() {
        var file = "employees.csv"; // Assuming employees.csv is in the same folder
        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {
          if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
              csvData = xhr.responseText;
              // Call queryEmployee() if CSV file loaded successfully
              // This ensures that the employee data is available when searching
              queryEmployee();
            } else {
              console.error(
                "Failed to load CSV file. Status code: " + xhr.status
              );
            }
          }
        };

        xhr.open("GET", file, true);
        xhr.send();
      }

      function capitalizeFirstLetter(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
      }

      function capitalizeSyllables(string) {
        return string.replace(/\b\w/g, function (char) {
          return char.toUpperCase();
        });
      }

      // Add event listener for 'keydown' event on the name input field
      document
        .getElementById("nameInput")
        .addEventListener("keydown", function (event) {
          if (event.key === "Enter") {
            queryEmployee(); // Call queryEmployee() when Enter key is pressed
          }
        });

      function queryEmployee() {
        var name = capitalizeSyllables(
          document.getElementById("nameInput").value.trim().toLowerCase()
        );
        if (name === "") {
          alert("Please enter a name.");
          return;
        }

        if (!csvData) {
          console.error("CSV file not loaded.");
          return;
        }

        var rows = csvData.split("\n");
        for (var i = 0; i < rows.length; i++) {
          var columns = rows[i].split(",");
          var employeeName = capitalizeSyllables(
            columns[0].trim().toLowerCase()
          );
          var employeeId = columns[1] ? columns[1].trim() : "";
          var tlName = columns[2] ? columns[2].trim() : "";
          var site = columns[3] ? columns[3].trim() : "";
          var waveNumber = columns[4] ? columns[4].trim() : "";
          var hiredDate = columns[5] ? columns[5].trim() : "";
          var tenure = columns[6] ? columns[6].trim() : "";
          var agentStatus = columns[7] ? columns[7].trim() : "";

          if (employeeName.includes(name)) {
            // Display employee information
            document.getElementById("result").innerHTML =
              "<p><strong>Employee Name:</strong> " +
              employeeName +
              "</p><p><strong>Employee Number:</strong> " +
              employeeId.toUpperCase() +
              "</p><p><strong>TL Name:</strong> " +
              tlName +
              "</p><p><strong>Site:</strong> " +
              site +
              "</p><p><strong>Wave Number:</strong> " +
              waveNumber +
              "</p><p><strong>Hired Date:</strong> " +
              hiredDate +
              "</p><p><strong>Tenure:</strong> " +
              tenure +
              "</p><p><strong>Agent Status:</strong> " +
              agentStatus +
              "</p>";
            document.getElementById("wrapIDResult").style.display = "block";
            return; // Exit the loop once found
          }
        }

        // If loop completes without finding the employee
        document.getElementById("result").innerText = "Employee not found.";
        document.getElementById("wrapIDResult").style.display = "block";
      }
    </script>
  </body>
</html>
